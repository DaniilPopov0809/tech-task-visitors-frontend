"use strict";(self.webpackChunktech_task_visitors_frontend=self.webpackChunktech_task_visitors_frontend||[]).push([[581],{2581:function(n,e,t){t.r(e),t.d(e,{default:function(){return A}});var s,r,i,a=t(9434),o=t(7022),c=t(3433),l=t(9439),d=t(2791),u=t(2591),x=t(168),h=t(6444),m=t(4324),j=(0,h.ZP)(m.CFC)(s||(s=(0,x.Z)(["\n  font-size: 18px;\n  margin-left: 8px;\n"]))),v=(0,h.ZP)(m.qwl)(r||(r=(0,x.Z)(["\n  font-size: 18px;\n  margin-left: 8px;\n"]))),f=(0,h.ZP)(m.dbR)(i||(i=(0,x.Z)(["\n  font-size: 18px;\n  margin-left: 8px;\n"]))),p=t(5316),Z=t(3360),g=t(3027),C=t(6828);var b=t(184);var S=function(n){var e=n.visitor,t=n.handleClose,s=n.setIsOpenModal,r=(0,d.useState)(e?"".concat(e.name):""),i=(0,l.Z)(r,2),o=i[0],c=i[1],u=(0,d.useState)(e?"".concat(e.lastname):""),x=(0,l.Z)(u,2),h=x[0],m=x[1],j=(0,a.I0)(),v=function(n){var e=n.currentTarget,t=e.name,s=e.value;switch(t){case"name":c(s);break;case"lastname":m(s);break;default:return}};return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(g.Z,{onSubmit:function(n){if(n.preventDefault(),e){var t=e.id;j(C.Z.update({id:t,name:o,lastname:h})),s(!1)}else{var r=function(){var n=(new Date).getTime(),e=new Date(n),t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),i=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0"),o=String(e.getSeconds()).padStart(2,"0");return"".concat(t,"-").concat(s,"-").concat(r," ").concat(i,":").concat(a,":").concat(o)}();j(C.Z.create({name:o,lastname:h,date:r}))}},className:"text-start",children:[(0,b.jsxs)(g.Z.Group,{className:"mb-3",children:[(0,b.jsx)(g.Z.Label,{children:"First name"}),(0,b.jsx)(g.Z.Control,{name:"name",type:"text",value:o,onChange:v,required:!0})]}),(0,b.jsxs)(g.Z.Group,{className:"mb-3",children:[(0,b.jsx)(g.Z.Label,{children:"Last name"}),(0,b.jsx)(g.Z.Control,{name:"lastname",type:"text",value:h,onChange:v,required:!0})]}),(0,b.jsx)(Z.Z,{variant:"primary",type:"submit",onClick:t,disabled:!o||!h,children:e?"Update":"Add"})]})})},k=function(n){var e=n.visitor,t=n.handleClose,s=n.show,r=n.setIsOpenModal,i=n.inputOne,a=n.inputTwo;return(0,b.jsxs)(p.Z,{show:s,onHide:t,size:"sm",children:[(0,b.jsx)(p.Z.Header,{closeButton:!0,children:(0,b.jsx)(p.Z.Title,{children:e?"Update visitor":"Add visitor"})}),(0,b.jsx)(p.Z.Body,{children:(0,b.jsx)(S,{visitor:e,handleClose:t,setIsOpenModal:r,inputOne:i,inputTwo:a})})]})};var y=function(n){var e=n.visitor,t=n.setIsOpenModal,s=(0,d.useState)(!1),r=(0,l.Z)(s,2),i=r[0],a=r[1];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Z.Z,{variant:"primary",onClick:function(){return a(!0)},children:"Update"}),(0,b.jsx)(k,{visitor:e,handleClose:function(){return a(!1)},show:i,setIsOpenModal:t})]})},w=function(n){var e=n.setIsOpenModal,t=n.visitor,s=(0,a.I0)();return(0,b.jsx)("div",{className:"modal show",style:{display:"block",position:"absolute"},children:(0,b.jsxs)(p.Z.Dialog,{size:"sm",children:[(0,b.jsx)(p.Z.Header,{closeButton:!0,onClick:function(){return e(!1)},children:(0,b.jsx)(p.Z.Title,{style:{fontSize:20},children:"What do with ".concat(t.name," ").concat(t.lastname,"?")})}),(0,b.jsxs)(p.Z.Body,{children:[(0,b.jsx)(Z.Z,{style:{marginRight:16},onClick:function(){s(C.Z.remove(t.id)),e(!1)},children:"Delete"}),(0,b.jsx)(y,{visitor:t,setIsOpenModal:e})]})]})})},I=function(n){return n.visitors.items},M=function(n){return n.sort.sortColumn},O=function(n){return n.sort.sortDirection},N=function(n){return n.visitors.isLoading},D=t(4212),F=function(n,e,t){e&&n.sort((function(n,s){var r=n[e],i=s[e];return r.localeCompare(i,void 0,{sensitivity:"base"})*("asc"===t?1:-1)}))},T=function(){var n=(0,d.useState)(!1),e=(0,l.Z)(n,2),t=e[0],s=e[1],r=(0,d.useState)(null),i=(0,l.Z)(r,2),o=i[0],x=i[1],h=(0,a.I0)(),m=(0,a.v9)(M),p=(0,a.v9)(O),Z=(0,a.v9)(I);(0,d.useEffect)((function(){h(C.Z.readAll())}),[h]);var g=function(n){m===n?h((0,D.iX)("asc"===p?"desc":"asc")):(h((0,D.M4)(n)),h((0,D.iX)("asc")))},S=(0,c.Z)(Z);return F(S,m,p),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(u.Z,{striped:!0,bordered:!0,hover:!0,style:{maxWidth:"700px"},children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsxs)("th",{onClick:function(){return g("name")},children:["Name","name"===m&&(0,b.jsx)("span",{children:"asc"===p?(0,b.jsx)(v,{}):(0,b.jsx)(f,{})})||(0,b.jsx)(j,{})]}),(0,b.jsxs)("th",{onClick:function(){return g("lastname")},children:["Last name","lastname"===m&&(0,b.jsx)("span",{children:"asc"===p?(0,b.jsx)(v,{}):(0,b.jsx)(f,{})})||(0,b.jsx)(j,{})]}),(0,b.jsxs)("th",{onClick:function(){return g("date")},children:["Time visit","date"===m&&(0,b.jsx)("span",{children:"asc"===p?(0,b.jsx)(v,{}):(0,b.jsx)(f,{})})||(0,b.jsx)(j,{})]})]})}),(0,b.jsx)("tbody",{children:S.map((function(n){return(0,b.jsxs)("tr",{onClick:function(){return function(n){s(!0),x(n)}(n)},children:[(0,b.jsx)("td",{children:n.name}),(0,b.jsx)("td",{children:n.lastname}),(0,b.jsx)("td",{children:n.date})]},n.id)}))})]}),t&&(0,b.jsx)(w,{visitor:o,setIsOpenModal:s})]})};var z=function(n){var e=n.visitor,t=(0,d.useState)(!1),s=(0,l.Z)(t,2),r=s[0],i=s[1];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Z.Z,{variant:"primary",onClick:function(){return i(!0)},children:"Add visitor"}),(0,b.jsx)(k,{visitor:e,handleClose:function(){return i(!1)},show:r})]})},_=t(4849);var L=function(){return(0,b.jsx)(_.Z,{animation:"border",variant:"primary"})},A=function(){var n=(0,a.v9)(N);return(0,b.jsxs)(o.Z,{className:"py-4 px-3",children:[(0,b.jsx)("h1",{className:"mb-3",children:'"Visitors in the building:'}),(0,b.jsxs)(o.Z,{className:"d-flex flex-column justify-content-center align-items-center p-0",children:[(0,b.jsx)(T,{}),n?(0,b.jsx)(L,{}):(0,b.jsx)(z,{})]})]})}}}]);
//# sourceMappingURL=581.6f2f0cd5.chunk.js.map